<!-- PATH: /Main/Main_Review.html :: FULL FILE -->
<section class="nt-section nt-footsteps" aria-labelledby="nt-footsteps-title">
  <div class="nt-panel">
    <div class="nt-footsteps-inner">
      <div class="nt-footsteps-head">
        <div class="nt-section-kicker">FIELD MOMENTS</div>
        <h2 id="nt-footsteps-title" class="nt-section-title">함께 걸어온 발자국</h2>
        <p class="nt-section-body">
          나비투어와 길을 걸은 분들의 발자국은 일정표보다 표정과 한마디에 더 선명하게 남습니다.<br>
          그 여정 중 몇 장면을, 사진과 한 줄로 기록했습니다.
        </p>
      </div>

      <div class="nt-footsteps-carousel" aria-label="함께 걸어온 발자국 사진 모음">
        <button class="nt-footsteps-nav nt-footsteps-prev" type="button" aria-label="이전 사진">
          &#10094;
        </button>

        <div class="nt-footsteps-viewport">
          <div class="nt-footsteps-track">
            <!-- 1 -->
            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/1.png" alt="서간도의 길 현장 사진">
                <div class="nt-footsteps-date">2025.03</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">북간도의 길 3박4일</span>
                <span class="sep">·</span>
                <span class="org">서울 고등학교</span>
              </figcaption>
            </figure>

            <!-- 2 -->
            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/2.png" alt="북간도의 길 현장 사진">
                <div class="nt-footsteps-date">2024.11</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">임시정부 발자취 4박5일</span>
                <span class="sep">·</span>
                <span class="org">부산 교회 청년부</span>
              </figcaption>
            </figure>

            <!-- 3 -->
            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/3.png" alt="도쿄 독립운동사 현장 사진">
                <div class="nt-footsteps-date">2025.01</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">도쿄 독립운동사 3일</span>
                <span class="sep">·</span>
                <span class="org">중견기업 인사팀 연수</span>
              </figcaption>
            </figure>

            <!-- 4 ~ 12: 슬롯 미리 생성 -->
            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/4.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/5.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/6.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/7.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/8.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/9.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/10.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/11.png" alt="">
                <div class="nt-footsteps-date">연도.월</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">코스 이름</span>
                <span class="sep">·</span>
                <span class="org">소속/단체</span>
              </figcaption>
            </figure>

            <figure class="nt-footsteps-item">
              <div class="nt-footsteps-imgwrap">
                <img src="Image/Review/12.png" alt="">
                <div class="nt-footsteps-date">2017.07</div>
              </div>
              <figcaption class="nt-footsteps-caption">
                <span class="prod">서간도의 길 4박5일</span>
                <span class="sep">·</span>
                <span class="org">미추홀랩</span>
              </figcaption>
            </figure>
          </div>
        </div>

        <button class="nt-footsteps-nav nt-footsteps-next" type="button" aria-label="다음 사진">
          &#10095;
        </button>
      </div>
    </div>
  </div>
</section>

<style>
  .nt-footsteps-inner{
    max-width: 960px;
    margin: 0 auto;
  }

  .nt-footsteps-head{
    text-align: center;
    margin-bottom: 24px;
  }

  .nt-footsteps-carousel{
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .nt-footsteps-viewport{
    flex: 1;
    overflow: hidden;
  }

  .nt-footsteps-track{
    display: flex;
    justify-content: flex-start;
    gap: 16px;
    transition: transform .45s ease;
  }

  /* 카드 3장씩 보이도록 폭 고정 */
  .nt-footsteps-item{
    flex: 0 0 calc(100% / 3);
    margin: 0;
    opacity: .55;
    transition: opacity .3s ease;
  }

  .nt-footsteps-item.is-center{
    opacity: 1;
  }

  /* 이미지 비율 고정 + 상하 여백 색 채우기 */
  .nt-footsteps-imgwrap{
    position: relative;
    border-radius: var(--radius, 14px);
    overflow: hidden;
    aspect-ratio: 4 / 3;
    background: #171c24;
  }

  .nt-footsteps-item img{
    width: 100%;
    height: 100%;
    object-fit: contain;
    display: block;
  }

  /* 날짜 배지 */
  .nt-footsteps-date{
    position: absolute;
    top: 10px;
    right: 12px;
    padding: 3px 9px;
    border-radius: 999px;
    font-size: 11px;
    line-height: 1.4;
    background: rgba(0,0,0,.55);
    color: #fff;
    backdrop-filter: blur(4px);
    white-space: nowrap;
  }

  .nt-footsteps-caption{
    margin-top: 10px;
    font-size: 13px;
    line-height: 1.4;
    color: var(--muted, #A7B2C5);
    text-align: center;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .nt-footsteps-caption .prod{
    font-weight: 600;
    color: var(--ink, #E8ECF6);
  }

  .nt-footsteps-caption .sep{
    opacity: .7;
    margin: 0 2px;
  }

  .nt-footsteps-nav{
    flex: 0 0 auto;
    width: 32px;
    height: 32px;
    border-radius: 999px;
    border: 1px solid rgba(0,0,0,.1);
    background: #e2e4e8;
    color: #555;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    padding: 0;
    font-size: 18px;
  }

  .nt-footsteps-nav:hover{
    background: #d5d7db;
  }

  .nt-footsteps-nav:focus-visible{
    outline: 2px solid var(--gold, #C9B27D);
    outline-offset: 2px;
  }

  @media (max-width: 720px){
    .nt-footsteps-carousel{
      gap: 6px;
    }
    .nt-footsteps-nav{
      width: 28px;
      height: 28px;
      font-size: 16px;
    }
  }
</style>

<script>
  // 함께 걸어온 발자국 – 3장 슬라이드, 가운데 부드러운 전환
  (function(){
    const root  = document.querySelector('.nt-footsteps-carousel');
    if (!root) return;

    const track = root.querySelector('.nt-footsteps-track');
    const prev  = root.querySelector('.nt-footsteps-prev');
    const next  = root.querySelector('.nt-footsteps-next');
    if (!track || !prev || !next) return;

    const STEP = 100 / 3; // 한 카드 폭(%) 기준
    let isAnimating = false;
    let dir = null;

    function markCenter(){
      const cards = Array.from(track.children);
      cards.forEach((el, idx) => {
        el.classList.toggle('is-center', idx === 1); // 항상 두 번째 카드가 가운데
      });
    }

    // 초기 상태: 마지막 카드를 앞으로 보내서 [12, 1, 2] 보이게
    (function initOrder(){
      const cards = track.children;
      if (cards.length > 1) {
        const last = cards[cards.length - 1];
        track.insertBefore(last, cards[0]);
      }
      markCenter();
    })();

    function goNext(){
      if (isAnimating) return;
      isAnimating = true;
      dir = 'next';
      track.style.transition = 'transform .45s ease';
      track.style.transform = 'translateX(-' + STEP + '%)';
    }

    function goPrev(){
      if (isAnimating) return;
      isAnimating = true;
      dir = 'prev';
      track.style.transition = 'transform .45s ease';
      track.style.transform = 'translateX(' + STEP + '%)';
    }

    prev.addEventListener('click', goPrev);
    next.addEventListener('click', goNext);

    track.addEventListener('transitionend', function(e){
      if (e.target !== track || e.propertyName !== 'transform') return;

      track.style.transition = 'none';

      if (dir === 'next') {
        // 맨 앞 카드를 뒤로 보내고 위치 리셋
        track.appendChild(track.firstElementChild);
      } else if (dir === 'prev') {
        // 맨 뒤 카드를 앞으로 보내고 위치 리셋
        const last = track.lastElementChild;
        track.insertBefore(last, track.firstElementChild);
      }

      track.style.transform = 'translateX(0)';
      markCenter();

      isAnimating = false;
      dir = null;
    });
  })();
</script>

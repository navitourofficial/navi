<!-- PATH: /Comp/Banner.html :: FULL REPLACE -->
<style>
  /* ===== 히어로 ===== */
  .hero{ position:relative; height:var(--hero-h); overflow:visible; }
  .hero .media{ position:absolute; inset:0; overflow:hidden; background:#0F1520; }
  .hero .slide{
    position:absolute; inset:0;
    background-position:center; background-size:cover; background-repeat:no-repeat;
    will-change:transform; backface-visibility:hidden;
    transform:translateX(0);
    transition:transform 420ms cubic-bezier(.22,.61,.36,1);
  }
  .hero .content{
    position:relative; z-index:3; height:100%;
    display:flex; align-items:center; justify-content:center; text-align:center; color:#fff;
  }
  .hero .text{ transition:opacity .22s ease; }
  .hero h1{ margin:0 0 12px; font:800 46px/1.14 "Playfair Display",serif; letter-spacing:.2px; }
  .hero p{ margin:0 0 22px; color:#f0f3f7 }
  .hero .cta{
    display:inline-flex; align-items:center; gap:10px; padding:12px 20px;
    border-radius:10px; font-weight:800; letter-spacing:.2px;
    background:linear-gradient(180deg,#D7BB83,#C3A36A); color:#22170A;
    box-shadow:0 8px 18px rgba(201,168,106,.25);
  }

  /* ===== 칩바(배너 하단 정착) ===== */
  :root{ --chip-h:56px; }
  .chipbar{ position:relative; z-index:5; margin-top: calc(-1 * var(--chip-h)); }
  .chiprail{ background:transparent; border:none; box-shadow:none; padding:0; overflow:auto hidden; text-align:center; }
  .chiprail::-webkit-scrollbar{display:none}
  .chips{ display:flex; gap:16px; justify-content:center; }

  /* 버튼(칩) – 기본 투명, 호버/액티브에서만 연한 배경 */
  .chip{
    display:inline-flex; align-items:center; justify-content:center;
    height:var(--chip-h); padding:0 18px; border-radius:10px;
    background:transparent; border:none; color:#EEF1F8;
    white-space:nowrap; font-weight:600; cursor:pointer;
    -webkit-tap-highlight-color:transparent;
    transition:background-color .18s ease;
  }
  .chip:hover, .chip:focus-visible{ background:rgba(255,255,255,.06); outline:none; }
  .chip:active{ background:rgba(255,255,255,.09); }
  .chip.is-active{ background:rgba(255,255,255,.07); color:#fff; }

  @media (max-width:820px){ .hero h1{font-size:36px} }
</style>

<!-- ===== HERO ===== -->
<section class="hero" role="region" aria-label="히어로">
  <div class="media" aria-hidden="true">
    <!-- 초기 배경: 0.png, B는 오른쪽 대기 -->
    <div class="slide front" id="slideA" style="background-image:
      linear-gradient(180deg, rgba(0,0,0,.45) 0%, rgba(0,0,0,.55) 55%, rgba(0,0,0,.62) 100%),
      url('Image/Banner/0.png'); transform:translateX(0)"></div>
    <div class="slide" id="slideB" style="background-image:
      linear-gradient(180deg, rgba(0,0,0,.45) 0%, rgba(0,0,0,.55) 55%, rgba(0,0,0,.62) 100%),
      url('Image/Banner/0.png'); transform:translateX(100%)"></div>
  </div>
  <div class="content wrap edge">
    <div class="text" id="heroText">
      <h1 id="heroTitle">과거를 배우고, 오늘을 잇는 여행</h1>
      <p id="heroSub">서간도에서 하와이까지, 독립의 발자취를 따라가는 프리미엄 해설 투어.</p>
      <a class="cta" href="#detail">상세보기</a>
    </div>
  </div>
</section>

<!-- ===== CHIPBAR ===== -->
<div class="chipbar">
  <div class="wrap edge">
    <div class="chiprail">
      <div class="chips" id="chipRow">
        <button class="chip is-active" type="button" data-idx="0" data-cat="all">전체</button>
        <button class="chip" type="button" data-idx="1" data-cat="sgando">서간도의 길</button>
        <button class="chip" type="button" data-idx="2" data-cat="bgando">북간도의 길</button>
        <button class="chip" type="button" data-idx="3" data-cat="gov">임시정부의 발자취</button>
        <button class="chip" type="button" data-idx="4" data-cat="fareast">극동 연해주</button>
        <button class="chip" type="button" data-idx="5" data-cat="jpn">일본 독립운동</button>
        <button class="chip" type="button" data-idx="6" data-cat="hawaii">하와이 독립운동</button>
      </div>
    </div>
  </div>
</div>

<script>
/* 히어로 ↔ 메인 동기화: 클릭 시 배너 슬라이드 + window.setCategory(cat) 호출.
   URL ?cat= 과 뒤로가기(popstate)도 반영 */
(function(){
  const CATS = [
    {cat:'all',    img:'Image/Banner/0.png', t:'과거를 배우고, 오늘을 잇는 여행', s:'서간도에서 하와이까지, 독립의 발자취를 따라가는 프리미엄 해설 투어.'},
    {cat:'sgando', img:'Image/Banner/1.png', t:'서간도에서 바라본 백두산',       s:'서간도의 들판과 골짜기, 백두의 능선을 향한 길.'},
    {cat:'bgando', img:'Image/Banner/2.png', t:'북간도, 압록을 건너 세운 터전',  s:'용정과 명동촌, 개척과 교육으로 지핀 내일.'},
    {cat:'gov',    img:'Image/Banner/3.png', t:'임시정부의 발자취를 따라',       s:'상하이에서 충칭까지, 망명 속에 이어진 시간.'},
    {cat:'fareast',img:'Image/Banner/4.png', t:'연해주, 바람이 남긴 기억',        s:'블라디보스토크와 우수리스크, 극동의 흔적을 잇다.'},
    {cat:'jpn',    img:'Image/Banner/5.png', t:'일본 땅에서 피운 뜻',            s:'도쿄와 규슈, 저항의 기록과 숨은 장소들.'},
    {cat:'hawaii', img:'Image/Banner/6.png', t:'하와이에서 이어진 약속',         s:'사탕수수 밭의 노동, 모금과 연대로 지켜낸 마음.'}
  ];
  const g = 'linear-gradient(180deg, rgba(0,0,0,.45) 0%, rgba(0,0,0,.55) 55%, rgba(0,0,0,.62) 100%), ';

  const A = document.getElementById('slideA');
  const B = document.getElementById('slideB');
  const textWrap = document.getElementById('heroText');
  const h = document.getElementById('heroTitle');
  const p = document.getElementById('heroSub');
  const chips = document.querySelectorAll('#chipRow .chip');

  function idxFromCat(cat){
    const i = CATS.findIndex(c => c.cat === cat);
    return i < 0 ? 0 : i;
  }

  function heroSwitch(idx, opts){
    opts = opts || {};
    const data = CATS[idx] || CATS[0];
    const front = A.classList.contains('front') ? A : B;
    const back  = front === A ? B : A;

    back.style.transition='none';
    back.style.transform='translateX(100%)';
    back.style.backgroundImage = g + 'url(' + data.img + ')';
    void back.offsetWidth; // reflow

    front.style.transition='transform 420ms cubic-bezier(.22,.61,.36,1)';
    back.style.transition ='transform 420ms cubic-bezier(.22,.61,.36,1)';
    front.style.transform='translateX(-100%)';
    back.style.transform='translateX(0)';

    if (textWrap){
      textWrap.style.opacity='0';
      setTimeout(function(){ h.textContent=data.t; p.textContent=data.s; textWrap.style.opacity='1'; }, 140);
    }
    setTimeout(function(){ front.classList.remove('front'); back.classList.add('front'); }, 420);

    // 칩 UI 동기화
    chips.forEach((c,i)=>c.classList.toggle('is-active', i===idx));

    // 메인 카드 렌더링 호출
    if (!opts.silent && typeof window.setCategory === 'function'){
      window.setCategory(data.cat);
    }
  }

  // 클릭 바인딩
  chips.forEach(btn=>{
    btn.addEventListener('click', function(){
      const idx = parseInt(this.dataset.idx, 10) || 0;
      heroSwitch(idx, {silent:false});
    });
  });

  // 초기 상태: URL ?cat= 에 맞춰 히어로만 세팅(메인은 별도 JS가 URL로 초기 렌더)
  function applyFromURL(silent){
    const cat = new URLSearchParams(location.search).get('cat');
    heroSwitch(idxFromCat(cat), {silent: !!silent});
  }
  window.addEventListener('popstate', ()=>applyFromURL(true));
  window.addEventListener('load', ()=>applyFromURL(true));
})();
</script>
